<%- include("../../views/partials/user/header") %>

<div class="container mt-5 mb-5">
  <div class="row">
    <!-- Payment Methods -->
    <div class="col-md-7">
      <h4 class="mb-4">Choose Payment Method</h4>
      <form action="/place-order" method="POST">
        <!-- Hidden Fields to carry data forward -->
        <input type="hidden" name="productId" value="<%= orderSummary.productId %>">
        <input type="hidden" name="quantity" value="<%= orderSummary.quantity %>">
        <input type="hidden" name="totalPrice" value="<%= orderSummary.total %>">
        
        <!-- Address Fields -->
        <input type="hidden" name="selected[addressType]" value="<%= selected.addressType %>">
        <input type="hidden" name="selected[name]" value="<%= selected.name %>">
        <input type="hidden" name="selected[city]" value="<%= selected.city %>">
        <input type="hidden" name="selected[landMark]" value="<%= selected.landMark %>">
        <input type="hidden" name="selected[state]" value="<%= selected.state %>">
        <input type="hidden" name="selected[pincode]" value="<%= selected.pincode %>">
        <input type="hidden" name="selected[phone]" value="<%= selected.phone %>">
        <input type="hidden" name="selected[altphone]" value="<%= selected.altphone %>">

        <div class="card p-3 mb-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="paymentMethod" id="creditCard" value="credit_card" checked>
              <label class="form-check-label" for="creditCard">
                Credit/Debit Card
              </label>
            </div>
          </div>
          
          <div class="card p-3 mb-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="paymentMethod" id="upi" value="upi">
              <label class="form-check-label" for="upi">
                UPI
              </label>
            </div>
          </div>
          
          <div class="card p-3 mb-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="paymentMethod" id="netBanking" value="net_banking">
              <label class="form-check-label" for="netBanking">
                Net Banking
              </label>
            </div>
          </div>
          
          <div class="card p-3 mb-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="paymentMethod" id="cod" value="cash_on_delivery">
              <label class="form-check-label" for="cod">
                Cash on Delivery
              </label>
            </div>
          </div>

        <button type="submit" class="btn btn-primary mt-3">Continue</button>
      </form>
    </div>

    <!-- Order Summary -->
    <div class="col-md-5">
      <h4 class="mb-4">Order Summary</h4>
      <div class="card p-4 shadow-sm">
        <p><strong>Product:</strong> <%= orderSummary.productName %></p>
        <!-- Display the product image using the <img> tag -->
        <img src="/uploads/product-images/<%= orderSummary.productImages[0] %>" alt="<%= orderSummary.productName %>" style="width: 100px; height: auto;" />
        <p><strong>Quantity:</strong> <%= orderSummary.quantity %></p>
        <p><strong>Price (each):</strong> ₹<%= orderSummary.price %></p>
        <hr>
        <p><strong>Total:</strong> ₹<%= orderSummary.total %></p>
        <p><strong>Address:</strong> <%= selected.city %>,<%= selected.pincode %>,<%= selected.state %>,</p>
      </div>
    </div>
  </div>
</div>

<%- include("../../views/partials/user/footer") %>